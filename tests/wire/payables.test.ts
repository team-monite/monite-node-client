/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../mock-server/MockServerPool.js";
import { MoniteClient } from "../../src/Client";

describe("Payables", () => {
    test("get", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    id: "id",
                    created_at: "2024-01-15T09:30:00Z",
                    updated_at: "2024-01-15T09:30:00Z",
                    amount_due: 1000,
                    amount_paid: 1000,
                    amount_to_pay: 1000,
                    approval_policy_id: "approval_policy_id",
                    counterpart: {
                        email: "acme@example.com",
                        name: "Acme Inc.",
                        phone: "5551231234",
                        tax_id: "DE12345678",
                    },
                    counterpart_address_id: "counterpart_address_id",
                    counterpart_bank_account_id: "counterpart_bank_account_id",
                    counterpart_id: "counterpart_id",
                    counterpart_raw_data: {
                        email: "acme@example.com",
                        name: "Acme Inc.",
                        phone: "5551231234",
                        tax_id: "DE12345678",
                    },
                    counterpart_vat_id_id: "counterpart_vat_id_id",
                    created_by_role_id: "created_by_role_id",
                    credit_notes: [
                        {
                            id: "123e4567-e89b-12d3-a456-426614174000",
                            document_id: "CN-123456",
                            issued_at: "2024-01-15",
                            status: "submitted_for_approval",
                            total_amount: 1000,
                        },
                    ],
                    currency: "AED",
                    currency_exchange: { default_currency_code: "default_currency_code", rate: 1.1, total: 1.1 },
                    description: "description",
                    discount: 500,
                    document_id: "DE2287",
                    due_date: "due_date",
                    entity_id: "entity_id",
                    file: {
                        id: "id",
                        created_at: "2024-01-15T09:30:00Z",
                        file_type: "payables",
                        name: "invoice.pdf",
                        region: "eu-central-1",
                        md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                        mimetype: "application/pdf",
                        url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                        size: 24381,
                        previews: [{ url: "https://bucketname.s3.amazonaws.com/1/2/3.png", width: 200, height: 400 }],
                        pages: [
                            {
                                id: "id",
                                mimetype: "image/png",
                                size: 21972,
                                number: 0,
                                url: "https://bucket.s3.amazonaws.com/123/456.png",
                            },
                        ],
                    },
                    file_id: "file_id",
                    issued_at: "issued_at",
                    marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
                    marked_as_paid_with_comment: "Was paid partly in the end of the month.",
                    ocr_request_id: "ocr_request_id",
                    ocr_status: "processing",
                    other_extracted_data: {
                        total_paid_amount_raw: 50,
                        total_raw: 70,
                        total_excl_vat_raw: 77,
                        total_vat_amount_raw: 7,
                        total_vat_rate_raw: 12.5,
                        currency: "EUR",
                        purchase_order_number: "1234",
                        counterpart_name: "Monite GMbH",
                        counterpart_account_id: "DEUTDEFF",
                        document_id: "CST-13341",
                        tax_payer_id: "12345678901",
                        counterpart_vat_id: "DE88939004",
                    },
                    paid_at: "2024-01-15T09:30:00Z",
                    partner_metadata: { key: "value" },
                    payable_origin: "upload",
                    payment_terms: { name: "name", term_final: { number_of_days: 1 } },
                    project_id: "project_id",
                    purchase_order_id: "purchase_order_id",
                    sender: "hello@example.com",
                    source_of_payable_data: "ocr",
                    status: "draft",
                    subtotal: 1250,
                    suggested_payment_term: { date: "date" },
                    tags: [
                        {
                            id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                            created_at: "2022-09-07T16:35:18Z",
                            updated_at: "2022-09-07T16:35:18Z",
                            created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                            description: "Tag for the Marketing Department",
                            name: "Marketing",
                        },
                    ],
                    tax: 2000,
                    tax_amount: 250,
                    total_amount: 1500,
                    total_amount_with_credit_notes: 1,
                    was_created_by_user_id: "was_created_by_user_id",
                },
            ],
            next_pagination_token: "next_pagination_token",
            prev_pagination_token: "prev_pagination_token",
        };
        server.mockEndpoint().get("/payables").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.payables.get();
        expect(response).toEqual({
            data: [
                {
                    id: "id",
                    created_at: "2024-01-15T09:30:00Z",
                    updated_at: "2024-01-15T09:30:00Z",
                    amount_due: 1000,
                    amount_paid: 1000,
                    amount_to_pay: 1000,
                    approval_policy_id: "approval_policy_id",
                    counterpart: {
                        email: "acme@example.com",
                        name: "Acme Inc.",
                        phone: "5551231234",
                        tax_id: "DE12345678",
                    },
                    counterpart_address_id: "counterpart_address_id",
                    counterpart_bank_account_id: "counterpart_bank_account_id",
                    counterpart_id: "counterpart_id",
                    counterpart_raw_data: {
                        email: "acme@example.com",
                        name: "Acme Inc.",
                        phone: "5551231234",
                        tax_id: "DE12345678",
                    },
                    counterpart_vat_id_id: "counterpart_vat_id_id",
                    created_by_role_id: "created_by_role_id",
                    credit_notes: [
                        {
                            id: "123e4567-e89b-12d3-a456-426614174000",
                            document_id: "CN-123456",
                            issued_at: "2024-01-15",
                            status: "submitted_for_approval",
                            total_amount: 1000,
                        },
                    ],
                    currency: "AED",
                    currency_exchange: {
                        default_currency_code: "default_currency_code",
                        rate: 1.1,
                        total: 1.1,
                    },
                    description: "description",
                    discount: 500,
                    document_id: "DE2287",
                    due_date: "due_date",
                    entity_id: "entity_id",
                    file: {
                        id: "id",
                        created_at: "2024-01-15T09:30:00Z",
                        file_type: "payables",
                        name: "invoice.pdf",
                        region: "eu-central-1",
                        md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                        mimetype: "application/pdf",
                        url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                        size: 24381,
                        previews: [
                            {
                                url: "https://bucketname.s3.amazonaws.com/1/2/3.png",
                                width: 200,
                                height: 400,
                            },
                        ],
                        pages: [
                            {
                                id: "id",
                                mimetype: "image/png",
                                size: 21972,
                                number: 0,
                                url: "https://bucket.s3.amazonaws.com/123/456.png",
                            },
                        ],
                    },
                    file_id: "file_id",
                    issued_at: "issued_at",
                    marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
                    marked_as_paid_with_comment: "Was paid partly in the end of the month.",
                    ocr_request_id: "ocr_request_id",
                    ocr_status: "processing",
                    other_extracted_data: {
                        total_paid_amount_raw: 50,
                        total_raw: 70,
                        total_excl_vat_raw: 77,
                        total_vat_amount_raw: 7,
                        total_vat_rate_raw: 12.5,
                        currency: "EUR",
                        purchase_order_number: "1234",
                        counterpart_name: "Monite GMbH",
                        counterpart_account_id: "DEUTDEFF",
                        document_id: "CST-13341",
                        tax_payer_id: "12345678901",
                        counterpart_vat_id: "DE88939004",
                    },
                    paid_at: "2024-01-15T09:30:00Z",
                    partner_metadata: {
                        key: "value",
                    },
                    payable_origin: "upload",
                    payment_terms: {
                        name: "name",
                        term_final: {
                            number_of_days: 1,
                        },
                    },
                    project_id: "project_id",
                    purchase_order_id: "purchase_order_id",
                    sender: "hello@example.com",
                    source_of_payable_data: "ocr",
                    status: "draft",
                    subtotal: 1250,
                    suggested_payment_term: {
                        date: "date",
                    },
                    tags: [
                        {
                            id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                            created_at: "2022-09-07T16:35:18Z",
                            updated_at: "2022-09-07T16:35:18Z",
                            created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                            description: "Tag for the Marketing Department",
                            name: "Marketing",
                        },
                    ],
                    tax: 2000,
                    tax_amount: 250,
                    total_amount: 1500,
                    total_amount_with_credit_notes: 1,
                    was_created_by_user_id: "was_created_by_user_id",
                },
            ],
            next_pagination_token: "next_pagination_token",
            prev_pagination_token: "prev_pagination_token",
        });
    });

    test("create", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = {};
        const rawResponseBody = {
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: { default_currency_code: "default_currency_code", rate: 1.1, total: 1.1 },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [{ url: "https://bucketname.s3.amazonaws.com/1/2/3.png", width: 200, height: 400 }],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: { key: "value" },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: { discount: 1, number_of_days: 1 },
                term_2: { discount: 1, number_of_days: 1 },
                term_final: { number_of_days: 1 },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: { date: "date", discount: 1 },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        };
        server
            .mockEndpoint()
            .post("/payables")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.create();
        expect(response).toEqual({
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: {
                default_currency_code: "default_currency_code",
                rate: 1.1,
                total: 1.1,
            },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [
                    {
                        url: "https://bucketname.s3.amazonaws.com/1/2/3.png",
                        width: 200,
                        height: 400,
                    },
                ],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: {
                key: "value",
            },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_2: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_final: {
                    number_of_days: 1,
                },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: {
                date: "date",
                discount: 1,
            },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        });
    });

    test("get_analytics", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            count: 1,
            data: [{ count: 1, status: "draft", sum_total_amount: 1 }],
            sum_total_amount: 1,
        };
        server
            .mockEndpoint()
            .get("/payables/analytics")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.getAnalytics();
        expect(response).toEqual({
            count: 1,
            data: [
                {
                    count: 1,
                    status: "draft",
                    sum_total_amount: 1,
                },
            ],
            sum_total_amount: 1,
        });
    });

    test("get_validations", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { required_fields: ["currency"] };
        server
            .mockEndpoint()
            .get("/payables/validations")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.getValidations();
        expect(response).toEqual({
            required_fields: ["currency"],
        });
    });

    test("update_validations", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { required_fields: ["currency"] };
        const rawResponseBody = { required_fields: ["currency"] };
        server
            .mockEndpoint()
            .put("/payables/validations")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.updateValidations({
            required_fields: ["currency"],
        });
        expect(response).toEqual({
            required_fields: ["currency"],
        });
    });

    test("reset_validations", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { required_fields: ["currency"] };
        server
            .mockEndpoint()
            .post("/payables/validations/reset")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.resetValidations();
        expect(response).toEqual({
            required_fields: ["currency"],
        });
    });

    test("get_variables", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    object_subtype: "payables_purchase_order",
                    object_type: "account",
                    variables: [{ description: "description", name: "name" }],
                },
            ],
        };
        server
            .mockEndpoint()
            .get("/payables/variables")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.getVariables();
        expect(response).toEqual({
            data: [
                {
                    object_subtype: "payables_purchase_order",
                    object_type: "account",
                    variables: [
                        {
                            description: "description",
                            name: "name",
                        },
                    ],
                },
            ],
        });
    });

    test("get_by_id", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: { default_currency_code: "default_currency_code", rate: 1.1, total: 1.1 },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [{ url: "https://bucketname.s3.amazonaws.com/1/2/3.png", width: 200, height: 400 }],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: { key: "value" },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: { discount: 1, number_of_days: 1 },
                term_2: { discount: 1, number_of_days: 1 },
                term_final: { number_of_days: 1 },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: { date: "date", discount: 1 },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        };
        server
            .mockEndpoint()
            .get("/payables/payable_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.getById("payable_id");
        expect(response).toEqual({
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: {
                default_currency_code: "default_currency_code",
                rate: 1.1,
                total: 1.1,
            },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [
                    {
                        url: "https://bucketname.s3.amazonaws.com/1/2/3.png",
                        width: 200,
                        height: 400,
                    },
                ],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: {
                key: "value",
            },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_2: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_final: {
                    number_of_days: 1,
                },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: {
                date: "date",
                discount: 1,
            },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        });
    });

    test("delete_by_id", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });

        server.mockEndpoint().delete("/payables/payable_id").respondWith().statusCode(200).build();

        const response = await client.payables.deleteById("payable_id");
        expect(response).toEqual(undefined);
    });

    test("update_by_id", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = {};
        const rawResponseBody = {
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: { default_currency_code: "default_currency_code", rate: 1.1, total: 1.1 },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [{ url: "https://bucketname.s3.amazonaws.com/1/2/3.png", width: 200, height: 400 }],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: { key: "value" },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: { discount: 1, number_of_days: 1 },
                term_2: { discount: 1, number_of_days: 1 },
                term_final: { number_of_days: 1 },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: { date: "date", discount: 1 },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        };
        server
            .mockEndpoint()
            .patch("/payables/payable_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.updateById("payable_id");
        expect(response).toEqual({
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: {
                default_currency_code: "default_currency_code",
                rate: 1.1,
                total: 1.1,
            },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [
                    {
                        url: "https://bucketname.s3.amazonaws.com/1/2/3.png",
                        width: 200,
                        height: 400,
                    },
                ],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: {
                key: "value",
            },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_2: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_final: {
                    number_of_days: 1,
                },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: {
                date: "date",
                discount: 1,
            },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        });
    });

    test("approve_payment_by_id", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: { default_currency_code: "default_currency_code", rate: 1.1, total: 1.1 },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [{ url: "https://bucketname.s3.amazonaws.com/1/2/3.png", width: 200, height: 400 }],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: { key: "value" },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: { discount: 1, number_of_days: 1 },
                term_2: { discount: 1, number_of_days: 1 },
                term_final: { number_of_days: 1 },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: { date: "date", discount: 1 },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        };
        server
            .mockEndpoint()
            .post("/payables/payable_id/approve_payment_operation")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.approvePaymentById("payable_id");
        expect(response).toEqual({
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: {
                default_currency_code: "default_currency_code",
                rate: 1.1,
                total: 1.1,
            },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [
                    {
                        url: "https://bucketname.s3.amazonaws.com/1/2/3.png",
                        width: 200,
                        height: 400,
                    },
                ],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: {
                key: "value",
            },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_2: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_final: {
                    number_of_days: 1,
                },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: {
                date: "date",
                discount: 1,
            },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        });
    });

    test("cancel_by_id", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: { default_currency_code: "default_currency_code", rate: 1.1, total: 1.1 },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [{ url: "https://bucketname.s3.amazonaws.com/1/2/3.png", width: 200, height: 400 }],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: { key: "value" },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: { discount: 1, number_of_days: 1 },
                term_2: { discount: 1, number_of_days: 1 },
                term_final: { number_of_days: 1 },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: { date: "date", discount: 1 },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        };
        server
            .mockEndpoint()
            .post("/payables/payable_id/cancel")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.cancelById("payable_id");
        expect(response).toEqual({
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: {
                default_currency_code: "default_currency_code",
                rate: 1.1,
                total: 1.1,
            },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [
                    {
                        url: "https://bucketname.s3.amazonaws.com/1/2/3.png",
                        width: 200,
                        height: 400,
                    },
                ],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: {
                key: "value",
            },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_2: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_final: {
                    number_of_days: 1,
                },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: {
                date: "date",
                discount: 1,
            },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        });
    });

    test("post_payables_id_cancel_ocr", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: { default_currency_code: "default_currency_code", rate: 1.1, total: 1.1 },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [{ url: "https://bucketname.s3.amazonaws.com/1/2/3.png", width: 200, height: 400 }],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: { key: "value" },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: { discount: 1, number_of_days: 1 },
                term_2: { discount: 1, number_of_days: 1 },
                term_final: { number_of_days: 1 },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: { date: "date", discount: 1 },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        };
        server
            .mockEndpoint()
            .post("/payables/payable_id/cancel_ocr")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.postPayablesIdCancelOcr("payable_id");
        expect(response).toEqual({
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: {
                default_currency_code: "default_currency_code",
                rate: 1.1,
                total: 1.1,
            },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [
                    {
                        url: "https://bucketname.s3.amazonaws.com/1/2/3.png",
                        width: 200,
                        height: 400,
                    },
                ],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: {
                key: "value",
            },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_2: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_final: {
                    number_of_days: 1,
                },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: {
                date: "date",
                discount: 1,
            },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        });
    });

    test("get_payables_id_history", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    id: "cd58435b-1c79-4b17-9f79-f898c93e5f97",
                    entity_user_id: "d5a577b0-01c0-4566-ac5c-44f41935e8c4",
                    event_data: { new_status: "draft", old_status: "draft" },
                    event_type: "status_changed",
                    payable_id: "f669a8a4-0563-4ab9-b54f-e9d700d282c5",
                    timestamp: "2024-01-15T09:30:00Z",
                },
            ],
            next_pagination_token: "next_pagination_token",
            prev_pagination_token: "prev_pagination_token",
        };
        server
            .mockEndpoint()
            .get("/payables/payable_id/history")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.getPayablesIdHistory("payable_id");
        expect(response).toEqual({
            data: [
                {
                    id: "cd58435b-1c79-4b17-9f79-f898c93e5f97",
                    entity_user_id: "d5a577b0-01c0-4566-ac5c-44f41935e8c4",
                    event_data: {
                        new_status: "draft",
                        old_status: "draft",
                    },
                    event_type: "status_changed",
                    payable_id: "f669a8a4-0563-4ab9-b54f-e9d700d282c5",
                    timestamp: "2024-01-15T09:30:00Z",
                },
            ],
            next_pagination_token: "next_pagination_token",
            prev_pagination_token: "prev_pagination_token",
        });
    });

    test("mark_as_paid_by_id", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = {};
        const rawResponseBody = {
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: { default_currency_code: "default_currency_code", rate: 1.1, total: 1.1 },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [{ url: "https://bucketname.s3.amazonaws.com/1/2/3.png", width: 200, height: 400 }],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: { key: "value" },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: { discount: 1, number_of_days: 1 },
                term_2: { discount: 1, number_of_days: 1 },
                term_final: { number_of_days: 1 },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: { date: "date", discount: 1 },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        };
        server
            .mockEndpoint()
            .post("/payables/payable_id/mark_as_paid")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.markAsPaidById("payable_id");
        expect(response).toEqual({
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: {
                default_currency_code: "default_currency_code",
                rate: 1.1,
                total: 1.1,
            },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [
                    {
                        url: "https://bucketname.s3.amazonaws.com/1/2/3.png",
                        width: 200,
                        height: 400,
                    },
                ],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: {
                key: "value",
            },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_2: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_final: {
                    number_of_days: 1,
                },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: {
                date: "date",
                discount: 1,
            },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        });
    });

    test("mark_as_partially_paid_by_id", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });
        const rawRequestBody = { amount_paid: 1 };
        const rawResponseBody = {
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: { default_currency_code: "default_currency_code", rate: 1.1, total: 1.1 },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [{ url: "https://bucketname.s3.amazonaws.com/1/2/3.png", width: 200, height: 400 }],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: { key: "value" },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: { discount: 1, number_of_days: 1 },
                term_2: { discount: 1, number_of_days: 1 },
                term_final: { number_of_days: 1 },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: { date: "date", discount: 1 },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        };
        server
            .mockEndpoint()
            .post("/payables/payable_id/mark_as_partially_paid")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.markAsPartiallyPaidById("payable_id", {
            amount_paid: 1,
        });
        expect(response).toEqual({
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: {
                default_currency_code: "default_currency_code",
                rate: 1.1,
                total: 1.1,
            },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [
                    {
                        url: "https://bucketname.s3.amazonaws.com/1/2/3.png",
                        width: 200,
                        height: 400,
                    },
                ],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: {
                key: "value",
            },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_2: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_final: {
                    number_of_days: 1,
                },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: {
                date: "date",
                discount: 1,
            },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        });
    });

    test("reject_by_id", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: { default_currency_code: "default_currency_code", rate: 1.1, total: 1.1 },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [{ url: "https://bucketname.s3.amazonaws.com/1/2/3.png", width: 200, height: 400 }],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: { key: "value" },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: { discount: 1, number_of_days: 1 },
                term_2: { discount: 1, number_of_days: 1 },
                term_final: { number_of_days: 1 },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: { date: "date", discount: 1 },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        };
        server
            .mockEndpoint()
            .post("/payables/payable_id/reject")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.rejectById("payable_id");
        expect(response).toEqual({
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: {
                default_currency_code: "default_currency_code",
                rate: 1.1,
                total: 1.1,
            },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [
                    {
                        url: "https://bucketname.s3.amazonaws.com/1/2/3.png",
                        width: 200,
                        height: 400,
                    },
                ],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: {
                key: "value",
            },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_2: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_final: {
                    number_of_days: 1,
                },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: {
                date: "date",
                discount: 1,
            },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        });
    });

    test("reopen_by_id", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: { default_currency_code: "default_currency_code", rate: 1.1, total: 1.1 },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [{ url: "https://bucketname.s3.amazonaws.com/1/2/3.png", width: 200, height: 400 }],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: { key: "value" },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: { discount: 1, number_of_days: 1 },
                term_2: { discount: 1, number_of_days: 1 },
                term_final: { number_of_days: 1 },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: { date: "date", discount: 1 },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        };
        server
            .mockEndpoint()
            .post("/payables/payable_id/reopen")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.reopenById("payable_id");
        expect(response).toEqual({
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: {
                default_currency_code: "default_currency_code",
                rate: 1.1,
                total: 1.1,
            },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [
                    {
                        url: "https://bucketname.s3.amazonaws.com/1/2/3.png",
                        width: 200,
                        height: 400,
                    },
                ],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: {
                key: "value",
            },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_2: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_final: {
                    number_of_days: 1,
                },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: {
                date: "date",
                discount: 1,
            },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        });
    });

    test("submit_for_approval_by_id", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: { country: "AF", type: "type", value: "value" },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: { default_currency_code: "default_currency_code", rate: 1.1, total: 1.1 },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [{ url: "https://bucketname.s3.amazonaws.com/1/2/3.png", width: 200, height: 400 }],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: { key: "value" },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: { discount: 1, number_of_days: 1 },
                term_2: { discount: 1, number_of_days: 1 },
                term_final: { number_of_days: 1 },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: { date: "date", discount: 1 },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        };
        server
            .mockEndpoint()
            .post("/payables/payable_id/submit_for_approval")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.submitForApprovalById("payable_id");
        expect(response).toEqual({
            id: "id",
            created_at: "2024-01-15T09:30:00Z",
            updated_at: "2024-01-15T09:30:00Z",
            amount_due: 1000,
            amount_paid: 1000,
            amount_to_pay: 1000,
            approval_policy_id: "approval_policy_id",
            counterpart: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_address_id: "counterpart_address_id",
            counterpart_bank_account_id: "counterpart_bank_account_id",
            counterpart_id: "counterpart_id",
            counterpart_raw_data: {
                address: {
                    city: "Berlin",
                    country: "AF",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    postal_code: "10115",
                    state: "state",
                },
                bank_account: {
                    account_holder_name: "account_holder_name",
                    account_number: "123456789012",
                    bic: "DEUTDE2HXXX",
                    iban: "iban",
                    sort_code: "sort_code",
                },
                email: "acme@example.com",
                name: "Acme Inc.",
                phone: "5551231234",
                tax_id: "DE12345678",
                vat_id: {
                    country: "AF",
                    type: "type",
                    value: "value",
                },
            },
            counterpart_vat_id_id: "counterpart_vat_id_id",
            created_by_role_id: "created_by_role_id",
            credit_notes: [
                {
                    id: "123e4567-e89b-12d3-a456-426614174000",
                    document_id: "CN-123456",
                    issued_at: "2024-01-15",
                    status: "submitted_for_approval",
                    total_amount: 1000,
                },
            ],
            currency: "AED",
            currency_exchange: {
                default_currency_code: "default_currency_code",
                rate: 1.1,
                total: 1.1,
            },
            description: "description",
            discount: 500,
            document_id: "DE2287",
            due_date: "due_date",
            entity_id: "entity_id",
            file: {
                id: "id",
                created_at: "2024-01-15T09:30:00Z",
                file_type: "payables",
                name: "invoice.pdf",
                region: "eu-central-1",
                md5: "31d1a2dd1ad3dfc39be849d70a68dac0",
                mimetype: "application/pdf",
                url: "https://bucketname.s3.amazonaws.com/12345/67890.pdf",
                size: 24381,
                previews: [
                    {
                        url: "https://bucketname.s3.amazonaws.com/1/2/3.png",
                        width: 200,
                        height: 400,
                    },
                ],
                pages: [
                    {
                        id: "id",
                        mimetype: "image/png",
                        size: 21972,
                        number: 0,
                        url: "https://bucket.s3.amazonaws.com/123/456.png",
                    },
                ],
            },
            file_id: "file_id",
            issued_at: "issued_at",
            marked_as_paid_by_entity_user_id: "71e8875a-43b3-434f-b12a-54c84c176ef3",
            marked_as_paid_with_comment: "Was paid partly in the end of the month.",
            ocr_request_id: "ocr_request_id",
            ocr_status: "processing",
            other_extracted_data: {
                type: "invoice",
                discount_raw: 1.1,
                total_paid_amount_raw: 50,
                total_raw: 70,
                total_excl_vat_raw: 77,
                total_vat_amount_raw: 7,
                total_vat_rate_raw: 12.5,
                currency: "EUR",
                purchase_order_number: "1234",
                counterpart_name: "Monite GMbH",
                counterpart_email: "counterpart_email",
                counterpart_address: "counterpart_address",
                counterpart_account_id: "DEUTDEFF",
                document_id: "CST-13341",
                payment_terms_raw: ["payment_terms_raw"],
                tax_payer_id: "12345678901",
                counterpart_vat_id: "DE88939004",
                document_issued_at_date: "document_issued_at_date",
                document_due_date: "document_due_date",
                counterpart_address_object: {
                    city: "Berlin",
                    country: "DE",
                    line1: "Flughafenstrasse 52",
                    line2: "line2",
                    original_country_name: "Berlin",
                    postal_code: "10115",
                    state: "state",
                },
                counterpart_account_number: "counterpart_account_number",
                counterpart_routing_number: "counterpart_routing_number",
                line_items_raw: [
                    {
                        description: "Impact Players : How to Take the Lead , Play Bigger , and Multiply Your",
                        quantity: 1.2,
                        unit_price: 100,
                        unit: "meters",
                        vat_percentage: 12.5,
                        vat_amount: 15,
                        total_excl_vat: 120,
                        total_incl_vat: 135,
                    },
                ],
            },
            paid_at: "2024-01-15T09:30:00Z",
            partner_metadata: {
                key: "value",
            },
            payable_origin: "upload",
            payment_terms: {
                description: "description",
                name: "name",
                term_1: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_2: {
                    discount: 1,
                    number_of_days: 1,
                },
                term_final: {
                    number_of_days: 1,
                },
            },
            project_id: "project_id",
            purchase_order_id: "purchase_order_id",
            sender: "hello@example.com",
            source_of_payable_data: "ocr",
            status: "draft",
            subtotal: 1250,
            suggested_payment_term: {
                date: "date",
                discount: 1,
            },
            tags: [
                {
                    id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    created_at: "2022-09-07T16:35:18Z",
                    updated_at: "2022-09-07T16:35:18Z",
                    category: "document_type",
                    created_by_entity_user_id: "ea837e28-509b-4b6a-a600-d54b6aa0b1f5",
                    description: "Tag for the Marketing Department",
                    name: "Marketing",
                },
            ],
            tax: 2000,
            tax_amount: 250,
            total_amount: 1500,
            total_amount_with_credit_notes: 1,
            was_created_by_user_id: "was_created_by_user_id",
        });
    });

    test("validate_by_id", async () => {
        const server = mockServerPool.createServer();
        const client = new MoniteClient({
            token: "test",
            moniteVersion: "test",
            moniteEntityId: "test",
            environment: server.baseUrl,
        });

        const rawResponseBody = { id: "id", validation_errors: [{ key: "value" }] };
        server
            .mockEndpoint()
            .post("/payables/payable_id/validate")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payables.validateById("payable_id");
        expect(response).toEqual({
            id: "id",
            validation_errors: [
                {
                    key: "value",
                },
            ],
        });
    });
});
